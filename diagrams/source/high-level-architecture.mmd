graph TB
    subgraph "Client Layer"
        C[Client Applications]
        F[Frontend - Next.js<br/>localhost:3000]
    end

    subgraph "API Layer"
        G[Gin HTTP Server<br/>:8080]
        AH[Album Handler]
        CORS[CORS Middleware]
    end

    subgraph "Service Layer"
        AR[Album Repository<br/>Interface]
        ITR[iTunes Repository<br/>Interface]
    end

    subgraph "Implementation Layer"
        PAR[Postgres Album Repository]
        CAR[Cassandra Album Repository]
        ITRAPL[iTunes Repository<br/>Implementation]
    end

    subgraph "Data Layer"
        PG[(PostgreSQL)]
        CAS[(Cassandra)]
        PGMIG[Postgres Migrations<br/>./migrations/postgres/]
        CASMIG[Cassandra Migrations<br/>./migrations/cassandra/]
    end

    subgraph "External Services"
        ITUNES[iTunes Search API<br/>itunes.apple.com]
    end

    subgraph "Infrastructure"
        ENV[Environment<br/>.env]
        DOCKER[Docker Compose]
    end

    %% Client connections
    C --> G
    F --> G

    %% API Layer
    G --> CORS
    CORS --> AH
    AH --> AR
    AH --> ITR

    %% Service to Implementation
    AR -.-> PAR
    AR -.-> CAR
    ITR -.-> ITRAPL

    %% Data connections
    PAR --> PG
    CAR --> CAS
    PGMIG --> PG
    CASMIG --> CAS
    ITRAPL --> ITUNES

    %% Infrastructure
    ENV -.-> G
    DOCKER --> PG
    DOCKER --> CAS

    %% Styling
    classDef client fill:#e1f5fe
    classDef api fill:#f3e5f5
    classDef service fill:#e8f5e8
    classDef impl fill:#fff3e0
    classDef data fill:#fce4ec
    classDef external fill:#f1f8e9
    classDef infra fill:#f5f5f5

    class C,F client
    class G,AH,CORS api
    class AR,ITR service
    class PAR,CAR,ITRAPL impl
    class PG,CAS,PGMIG,CASMIG data
    class ITUNES external
    class ENV,DOCKER infra
